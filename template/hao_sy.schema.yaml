# Rime schema settings
# encoding: utf-8

schema:
  schema_id: hao_sy
  name: 'å¥½ç ãƒ»æ¾çƒŸ(å‰ç¼€ç )'
  version: '20250520'
  author:
    - ä½œè€… è’
    - å®˜æ–¹QQç¾¤ 1012245282
  description: |
    å‰ç¼€ç Â·æ¾çƒŸ
    "`é”® åæŸ¥ï¼šæ‹¼éŸ³+ç¬”ç”»(hspnz)"
  dependencies:
    - hao_pinyin
    - hao_stroke
    - hao_sy_chaifen

switches:
  - name: hao_autocommit
    reset: 1
    abbrev: [æ¾, çƒŸ]
    states: [â˜æ•´å¥, â˜‘å‰ç¼€]
  - name: hao_embeded_cands
    states: [ æ™®é€š, åµŒå…¥ ]
    #reset: 1
  - options:
      - hao_spelling.off
      - hao_spelling.lv1
      - hao_spelling.lv2
      - hao_spelling.lv3
    states: [æ— æ³¨è§£, ä¸€é‡æ³¨è§£, äºŒé‡æ³¨è§£, å¤šé‡æ³¨è§£]
    #reset: 0
  - name: lazy_clock
    abbrev: [æ— , æ™‚]
    states: [ å…³é—­å€™é€‰æ—¶é—´, å¼€å¯å€™é€‰æ—¶é—´ ]
    reset: 0
  - name: preedit_lazy_clock
    abbrev: [æ— , æ™‚]
    states: [ å…³é—­ç¼–è¾‘åŒºæ—¶é—´, å¼€å¯ç¼–è¾‘åŒºæ—¶é—´ ]
    reset: 0
  - name: traditionalization
    states: [ç®€ä¿æŒ, ç®€è½¬ç¹]
    #reset: 0
    # Control+Shift+F
  - name: simplification
    states: [ç¹ä¿æŒ, ç¹è½¬ç®€]
    #reset: 0
    # Control+Shift+J
  - name: emoji_suggestion
    #reset: 1
    abbrev: [ "ğŸˆšï¸", "ğŸˆ¶ï¸" ]
    states: [â˜emoji, â˜‘emoji]
  - name: ascii_mode
    states: [ä¸­æ–‡, è¥¿æ–‡]
    reset: 0
  - name: full_shape
    states: ["åŠè§’", "å…¨è§’"]
    reset: 0
  - name: ascii_punct
    states: [ã€‚ï¼Œ, ï¼ï¼Œ]
    reset: 0

engine:
  processors:
    - lua_processor@*hao.hao_switch*proc@hao
    - ascii_composer
    - recognizer
    - lua_processor@*hao.hao_spelling*processor
    - lua_processor@*hao.hao_autocommit
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@hao_pinyin_lookup
    - affix_segmentor@hao_stroke_lookup
    - affix_segmentor@reverse_lookup
    - punct_segmentor
    - fallback_segmentor
  translators:
    - lua_translator@*hao.hao_switch*tr@hao
    - punct_translator
    - lua_translator@*hao.hao_shijian
    - lua_translator@*hao.hao_number
    - history_translator@history
    - script_translator@hao_pinyin_lookup
    - table_translator@hao_stroke_lookup
    - script_translator
    - lua_translator@*hao.hao_os*os_env_translator
  filters:
    - simplifier@traditionalize
    - simplifier@simplify
    - simplifier@emoji_suggestion
    - reverse_lookup_filter@reverse_lookup
    - lua_filter@*hao.hao_spelling*filter
    - lua_filter@*hao.hao_os*lazy_clock_filter
    - lua_filter@*hao.hao_os*preedit_lazy_clock_filter
    - lua_filter@*hao.hao_embeded_cands
    - uniquifier

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba;'/
  initials: zyxwvutsrqponmlkjihgfedcba;'/
  delimiter: []
  #auto_select: true
  auto_clear: auto  # 3ç§é€‰æ‹©ï¼Œ manual|auto|max_length ç©ºç æŒ‰ä¸‹ä¸€é”®ç¡®è®¤æ¸…å±|ç©ºç è‡ªåŠ¨æ¸…|è¾¾åˆ°æœ€é•¿ç æ—¶åç é¡¶ä¸Šæ¸…å±
  # max_code_length: 5
  # auto_select_pattern: ^;\w+|^\w+;
  # algebra:
  #   - xform/^([a-z]{1,5})[a-z]*$/$1/

translator:
  dictionary: hao_sy
  prism: hao_sy
  db_class: tabledb
  enable_completion: true
  enable_sentence: true
  enable_user_dict: false
  enable_encoder: false
  encode_commit_history: false
  initial_quality: 1000000
  preedit_format:
    #- xform/[a-z]/\â€»/
    #- xform/[a-z]/Â·/
  comment_format:
    - "xform/^~/ /"

hao:
  code: hao_sy
  tags: [ abc ]
  #postpone_fullcode:
  #  max_index: 4  # æœ€å¤§åç½®ä½ç½®ï¼Œé»˜è®¤ä¸º 4
  spelling:
    schema: hao_sy_chaifen
    cycle_key: "Shift+Control+C"
    switch_key: "Control+c"
    phrase: 0
  birthday:
    solar:
      æ·…ç : "0429,æ·…ç è¯ç”Ÿ"
      æ¾çƒŸ: "0520,æ¾çƒŸè¯ç”Ÿ"
    lunar:
      æ˜¥èŠ‚: "0101,å†œå†æ˜¥èŠ‚"
  funckeys:
    macro: [0x2f] # ç•¶è¼¸å…¥ä¸²ä»¥ "/" é–‹é ­æ™‚, èªçˆ²æ˜¯å®èª¿ç”¨
  macros:
    hao:
      - { type: tip, name: â–æ¾çƒŸé…ç½®ä¸­å¿ƒ }
      - { type: switch, name: hao_autocommit, states: [â˜æ•´å¥, â˜‘å‰ç¼€] }
      - { type: switch, name: hao_embeded_cands, states: [â˜åµŒå…¥, â˜‘åµŒå…¥] }
      - {
          type: radio,
          names:
            [
              hao_spelling.off,
              hao_spelling.lv1,
              hao_spelling.lv2,
              hao_spelling.lv3,
            ],
          states: [â˜â˜â˜æ³¨è§£, â˜‘â˜â˜æ³¨è§£, â˜â˜‘â˜æ³¨è§£, â˜â˜â˜‘æ³¨è§£],
        }
      - { type: switch, name: traditionalization, states: [â˜ç®€ä¿æŒ, â˜‘ç®€è½¬ç¹] }
      - { type: switch, name: simplification, states: [â˜ç¹ä¿æŒ, â˜‘ç¹è½¬ç®€] }
      - { type: switch, name: emoji_suggestion, states: [â˜emoji, â˜‘emoji] }
      - { type: switch, name: full_shape, states: [â˜åŠè§’, â˜‘å…¨è§’] }
      - { type: switch, name: ascii_punct, states: [â˜ä¸­æ–‡æ ‡ç‚¹, â˜‘è‹±æ–‡æ ‡ç‚¹] }
    date:
      - { type: eval, name: â˜€æ—¥æœŸ, expr: return os.date("%Y-%m-%d") }
      - { type: eval, name: â›…å¹´æœˆæ—¥, expr: return os.date("%Yå¹´%mæœˆ%dæ—¥") }
    time:
      - { type: eval, name: âŒšæ—¶é—´, expr: return os.date("%H:%M:%S") }
      - { type: eval, name: â“‰æ—¶é—´, expr: return os.date("%Y%m%d%H%M") }
      - { type: eval, name: â“ˆæ—¶é—´æˆ³, expr: return tostring(os.time()) }
    auto:
      - { type: switch, name: hao_autocommit, states: [â˜æ•´å¥, â˜‘å‰ç¼€] }
    a:
      - { type: switch, name: hao_autocommit, states: [â˜æ•´å¥, â˜‘å‰ç¼€] }
    div:
      - {
          type: radio,
          names:
            [
              hao_spelling.off,
              hao_spelling.lv1,
              hao_spelling.lv2,
              hao_spelling.lv3,
            ],
          states: [â˜â˜â˜æ³¨è§£, â˜‘â˜â˜æ³¨è§£, â˜â˜‘â˜æ³¨è§£, â˜â˜â˜‘æ³¨è§£],
        }
    trad:
      - { type: switch, name: traditionalization, states: [â˜ä¸è½¬æ¢, â˜‘ç®€è½¬ç¹] }
    simp:
      - { type: switch, name: simplification, states: [â˜ä¸è½¬æ¢, â˜‘ç¹è½¬ç®€] }
    full:
      - { type: switch, name: full_shape, states: [â˜åŠè§’, â˜‘å…¨è§’] }
    half:
      - { type: switch, name: full_shape, states: [â˜åŠè§’, â˜‘å…¨è§’] }
    punc:
      - { type: switch, name: ascii_punct, states: [â˜ä¸­æ–‡æ ‡ç‚¹, â˜‘è‹±æ–‡æ ‡ç‚¹] }
    dot:
      - { type: switch, name: ascii_punct, states: [â˜ä¸­æ–‡æ ‡ç‚¹, â˜‘è‹±æ–‡æ ‡ç‚¹] }
    lazy:
      - { type: switch, name: lazy_clock, states: [â˜å€™é€‰æ—¶é—´, â˜‘å€™é€‰æ—¶é—´] }
    dist:
      - type: eval
        expr: >
          return function(args)
            return string.format("librime: [%s]", rime_api.get_rime_version())
          end
      - type: eval
        expr: >
          return function(args)
            return string.format("distribution: [%s](%s/%s)",
              rime_api.get_distribution_name(),
              rime_api.get_distribution_code_name(),
              rime_api.get_distribution_version())
          end
    uni:
      - type: eval
        hijack: true
        expr: return require("hao.hao_core").unicode()
    w:
      - type: eval
        hijack: true
        expr: return require("hao.hao_core").unicode()

traditionalize:
  tags: [abc, hao_pinyin_lookup, hao_stroke_lookup]
  option_name: traditionalization
  opencc_config: s2t.json
  tips: all
  comment_format:
    - xform/^/ã€”/
    - xform/$/ã€•/

simplify:
  tags: [abc, hao_pinyin_lookup, hao_stroke_lookup]
  option_name: simplification
  opencc_config: t2s.json
  tips: all
  comment_format:
    - xform/^/ã€”/
    - xform/$/ã€•/

emoji_suggestion:
    opencc_config: emoji.json
    option_name: emoji_suggestion
    tips: none
    inherit_comment: false

history:
  input: "'"
  size: 3
  initial_quality: 0

reverse_lookup:
  tag: reverse_lookup
  dictionary: hao_sy
  prefix: "`"    # åæŸ¥å¼•å¯¼ç¬¦ã€Œ`ã€
  # suffix:   # åæŸ¥å…³é—­ç¬¦ï¼Œæš‚ä¸å®šä¹‰
  tips: ã€åæŸ¥ï¼šæ‹¼éŸ³+ç¬”ç”»(hspnz)ã€‘
  closing_tips: ã€åæŸ¥å…³é—­ã€‘
  tags: [ hao_pinyin_lookup, hao_stroke_lookup ]
  extra_tags:
    - hao_pinyin_lookup
    - hao_stroke_lookup

hao_pinyin_lookup:
  tag: hao_pinyin_lookup
  dictionary: hao_pinyin
  enable_user_dict: false
  prefix: '`P'
  tips: ã€æ‹¼éŸ³åæŸ¥ã€‘
  closing_tips: ã€åæŸ¥å…³é—­ã€‘
  initial_quality: 0.2

hao_stroke_lookup:
  tag: hao_stroke_lookup
  dictionary: hao_stroke
  prism: hao_stroke
  enable_user_dict: false
  prefix: '`B'
  tips: ã€äº”ç¬”ç”»åæŸ¥ã€‘
  closing_tips: ã€åæŸ¥å…³é—­ã€‘
  initial_quality: 0.5
  preedit_format:
    - 'xform/^([hspnz]+)$/$1\tï¼ˆ\U$1\Eï¼‰/'
    - xlit/HSPNZ/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  comment_format:
    - xlit/qweas/hspnz/

punctuator:
  import_preset: symbols
  half_shape:
    "`": "`"
    "#": "#"
    "%": "%"
    "*": "*"
    "\\": "ã€"
    "[": "ã€"
    "]": "ã€‘"
    "{": "ã€Œ"
    "}": "ã€"
    "/": "/"
    "|": "|"
  digit_separators: ",."

key_binder:
  bindings:
    - { when: always, accept: "Control+period", toggle: ascii_punct }
    - { when: always, accept: "Control+Shift+period", toggle: ascii_punct }
    - { when: always, accept: "Control+Shift+J", toggle: simplification }
    - { when: always, accept: "Control+Shift+F", toggle: traditionalization }
    - { when: has_menu, accept: apostrophe, send: KP_3 } # å¼•å·ä¸‰é€‰
    - { when: has_menu, accept: Tab, send: KP_2 } # è£½è¡¨ç¬¦æ¬¡é€‰
    - { when: has_menu, accept: minus, send: Page_Up } # æ¸›è™Ÿä¸Šç¿»é 
    - { when: has_menu, accept: equal, send: Page_Down } # ç­‰è™Ÿä¸‹ç¿»é 
    - { when: composing, accept: "Control+d", send: Delete }
    - { when: composing, accept: "Control+k", send: "Shift+Delete" }
    - { when: always, accept: "Control+Shift+E", toggle: hao_embeded_cands }

recognizer:
  import_preset: default
  patterns:
    uppercase: "^(?![`;]).*[A-Z][-_+.'0-9A-Za-z]*$"
    reverse_lookup: "^`([a-z]+?)*$"
    hao_pinyin_lookup: "^`P([a-z]+'?)*$"
    hao_stroke_lookup: "^`B([a-z]+'?)*$"
    punct: "^/([0-9]0?|[A-Za-z]+)?$"
    hao_os: '^/env\w+'
    unicode: "^/(uni|w)(/[a-zA-Z0-9]*)*$"

menu:
  page_size: 5
